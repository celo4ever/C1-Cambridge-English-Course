<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C1 Advanced English Practice</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }</style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    // Icons
    const Icon = ({ name, size = 24, className = "" }) => {
      const icons = {
        Book: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>,
        CheckCircle: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
        XCircle: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>,
        ArrowLeft: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
        ChevronRight: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"/></svg>,
        BookOpen: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
        PenTool: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>,
        GraduationCap: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>,
        RotateCcw: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>,
        FileText: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
        Notebook: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M16 2v20"/></svg>,
        Library: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m16 6 4 14"/><path d="M12 6v14"/><path d="M8 8v12"/><path d="M4 4v16"/></svg>,
      };
      return icons[name] || null;
    };

    // ============================================
    // DATA
    // ============================================
    const unitsData = {
      1: { title: "Unit 1: Aiming High", description: "Modal verbs, adverbs of degree, collocations for challenge and achievement" },
      2: { title: "Unit 2: Times Change", description: "Coming soon" },
      3: { title: "Unit 3: Gathering Information", description: "Coming soon" },
    };

    // VIU Unit 60 Theory
    const viuUnit60Theory = {
      sections: [
        {
          title: "A. Succeeding",
          content: `**Key verbs for success:**
• We **succeeded in** persuading a lot of people to join our protest. (in + -ing)
• I **managed to** contact him just before he left his office.
• I don't think I can **manage** the whole walk. I think I'll turn back.
• We've **achieved / accomplished** a great deal in the last year.
• The company has **achieved** all its goals/aims/targets for this year.
• Do you think his plan will **come off**? [succeed; informal]

**Collocations matrix:**
• **reach** + an agreement, a compromise
• **attain** + an ambition (formal)
• **secure** + an agreement
• **realise** + an ambition, a dream
• **fulfil** + an ambition, a dream, an obligation
• **achieve** + an ambition, a target, a compromise`
        },
        {
          title: "B. Failing and Difficulty",
          content: `**Expressions for failure:**
• Plans sometimes **go wrong / backfire**. [don't go as intended]
• Companies often **fold / go under** through lack of success.
• A project may **falter**, even if it finally succeeds.
• All your efforts may **come to nothing**.

**Expressions for difficulty:**
• I have great **difficulty (in)** getting up in the morning.
• I **find it difficult to** remember names.
• It's **hard/difficult to** hear what she's saying.
• I often **have trouble** starting the car.
• We've had a lot of **bother** with the neighbours.
• Can you **cope with** three more students?`
        },
        {
          title: "C. Word Formation",
          content: `**Verb → Noun → Adjective:**
• succeed → success → successful
• accomplish → accomplishment → accomplished
• achieve → achievement → achievable
• attain → attainment → attainable
• fulfil → fulfilment → fulfilling

**Common mistakes:**
• ✗ "great difficulties" → ✓ "great difficulty" (uncountable)
• ✗ "many successes" → ✓ "considerable success" (uncountable)`
        }
      ]
    };

    // VIU Unit 60 Exercises
    const viuUnit60Exercises = [
      {
        id: "viu60.1",
        title: "60.1 Verb + Noun Collocations",
        type: "fill-select",
        instruction: "Choose a suitable verb to fill the gaps.",
        wordBank: ["reached", "fulfilled", "reach", "realise", "fulfil", "come"],
        questions: [
          { sentence: "The management have ___ a no-strike agreement with the union.", answer: "reached" },
          { sentence: "Now I've ___ all my family responsibilities, I can retire.", answer: "fulfilled" },
          { sentence: "The fund has failed to ___ its target of £250,000.", answer: "reach" },
          { sentence: "I never thought I would ___ my ambition, but now I have.", answer: "realise" },
          { sentence: "Very few people ___ all their hopes and dreams in life.", answer: "fulfil" },
          { sentence: "I'm afraid that little plan of mine didn't ___ off.", answer: "come" }
        ]
      },
      {
        id: "viu60.2",
        title: "60.2 Word Formation",
        type: "word-formation-suffix",
        instruction: "Fill in the missing word forms.",
        questions: [
          { sentence: "The noun form of 'realise' is ___.", base: "REALISE", answer: "realisation" },
          { sentence: "The adjective form of 'difficulty' is ___.", base: "DIFFICULTY", answer: "difficult" },
          { sentence: "The noun form of 'fail' is ___.", base: "FAIL", answer: "failure" },
          { sentence: "The adjective form of 'success' is ___.", base: "SUCCESS", answer: "successful" },
          { sentence: "The noun form of 'achieve' is ___.", base: "ACHIEVE", answer: "achievement" }
        ]
      },
      {
        id: "viu60.3",
        title: "60.3 Error Correction",
        type: "error-correction",
        instruction: "Each sentence has one mistake. Type the corrected phrase.",
        questions: [
          { sentence: "I find very difficult to understand English idioms.", error: "find very difficult", correction: "find it very difficult", explanation: "Need 'it' as dummy object" },
          { sentence: "She succeeded to rise to the top of her profession.", error: "succeeded to rise", correction: "succeeded in rising", explanation: "'Succeed' takes 'in + -ing'" },
          { sentence: "Do you ever have any trouble to use this photocopier?", error: "trouble to use", correction: "trouble using", explanation: "'Have trouble' takes '-ing'" },
          { sentence: "I'm amazed that you can cope all the work.", error: "cope all", correction: "cope with all", explanation: "'Cope' requires 'with'" },
          { sentence: "Did you have many difficulties finding the book?", error: "difficulties", correction: "difficulty", explanation: "'Difficulty' is uncountable here" },
          { sentence: "All Johnny's plans have come at nothing.", error: "come at nothing", correction: "come to nothing", explanation: "Expression is 'come to nothing'" }
        ]
      },
      {
        id: "viu60.4",
        title: "60.4 Failure Expressions",
        type: "match-meanings",
        instruction: "Match each situation with the best expression.",
        questions: [
          { sentence: "The company closed down because it wasn't making money.", meaning: "fold / go under", options: ["go wrong", "backfire", "fold / go under", "falter", "come to nothing"] },
          { sentence: "My plan to surprise her actually made her angry instead.", meaning: "backfire", options: ["go wrong", "backfire", "fold / go under", "falter", "come to nothing"] },
          { sentence: "The project had problems but eventually succeeded.", meaning: "falter", options: ["go wrong", "backfire", "fold / go under", "falter", "come to nothing"] },
          { sentence: "Despite all our efforts, we achieved absolutely nothing.", meaning: "come to nothing", options: ["go wrong", "backfire", "fold / go under", "falter", "come to nothing"] }
        ]
      },
      {
        id: "viu60.5",
        title: "60.5 Difficulty Expressions",
        type: "fill-select",
        instruction: "Complete the sentences with the correct word.",
        wordBank: ["difficulty", "trouble", "bother", "cope", "hard", "manage"],
        questions: [
          { sentence: "I have great ___ remembering people's names.", answer: "difficulty" },
          { sentence: "We've had a lot of ___ with the new software.", answer: "trouble" },
          { sentence: "It's ___ to concentrate when there's so much noise.", answer: "hard" },
          { sentence: "Can you ___ with all this extra work?", answer: "cope" },
          { sentence: "I didn't ___ to finish the project on time.", answer: "manage" },
          { sentence: "Don't go to any ___ - I can make my own dinner.", answer: "bother" }
        ]
      }
    ];

    // Unit 1 Theory
    const unit1Theory = {
      sections: [
        {
          title: "Modal Verbs: Might, Could, May and Can",
          content: `**MIGHT** can express:
• **Future possibility**: I might be home a bit later tonight.
• **Present possibility**: There might be something good on TV.
• **Past possibility**: They might have taken a wrong turning.
• **Annoyance/criticism**: You might at least help me carry this!
• **Lack of enthusiasm**: We might as well go to bed.
• **Concession**: He might be good-looking, but he can't sing.

**CAN/CAN'T** can express:
• **Ability**: It can store up to 70,000 images.
• **Criticism**: You can be really irritating sometimes!
• **Request**: Can you take my calls this afternoon?
• **Deduction**: It can't be very healthy if it contains that!
• **Prohibition**: No, you can't! 1 am is far too late.`
        },
        {
          title: "Adverbs of Degree",
          content: `**Gradable adjectives** (can vary in intensity):
• very/quite/fairly + difficult, risky, tiring, pleased, ambitious

**Non-gradable adjectives** (absolute/extreme):
• absolutely/completely/utterly + impossible, exhausted, incredible

**Common adverb + adjective collocations:**
• **perfectly** + clear, normal, capable
• **highly** + gifted, promising, talented, qualified
• **fully** + qualified, booked, equipped, informed
• **wholly** + inappropriate, inadequate, unacceptable
• **utterly** + ridiculous, disgraceful, opposed
• **bitterly** + resent, regret, disappointed
• **fiercely** + ambitious, proud, loyal`
        },
        {
          title: "Vocabulary: Challenge and Achievement",
          content: `**Collocations with CHALLENGE:**
• face / take up / rise to + a challenge
• formidable / daunting / major / new challenge

**Collocations with SUCCESS:**
• achieve / enjoy success
• overnight / resounding / huge success

**Collocations with FAILURE:**
• end in / result in failure
• total / costly / dismal failure

**Collocations with AMBITION:**
• fulfil / realise an ambition
• burning / lifelong / secret / main ambition`
        }
      ]
    };

    // Unit 1 SB Exercises
    const unit1SBExercises = [
      {
        id: "sb1.1",
        title: "Vocabulary: Complete the Collocations",
        type: "fill-select",
        instruction: "Complete the expressions with a noun from the box.",
        wordBank: ["ambition", "challenge", "chance", "failure", "motivation", "success"],
        questions: [
          { sentence: "The film was an overnight ___, despite its low budget.", answer: "success" },
          { sentence: "I have a burning ___ to travel to Australia.", answer: "ambition" },
          { sentence: "A system of rewards can help increase student ___.", answer: "motivation" },
          { sentence: "My attempts to learn Japanese met with complete ___.", answer: "failure" },
          { sentence: "The government faces the formidable ___ of reducing unemployment.", answer: "challenge" },
          { sentence: "He leaves nothing to ___ and plans everything before a trip.", answer: "chance" }
        ]
      },
      {
        id: "sb1.2",
        title: "Modal Verbs: Match Meanings",
        type: "match-meanings",
        instruction: "Match each sentence with the meaning it expresses.",
        questions: [
          { sentence: "You might at least help me carry it!", meaning: "annoyance", options: ["future possibility", "past possibility", "annoyance", "lack of enthusiasm", "concession"] },
          { sentence: "You might have had an accident back there.", meaning: "past possibility (criticism)", options: ["future possibility", "past possibility (criticism)", "present possibility", "lack of enthusiasm", "concession"] },
          { sentence: "I might be home a bit later tonight.", meaning: "future possibility", options: ["future possibility", "past possibility", "annoyance", "lack of enthusiasm", "present possibility"] },
          { sentence: "There might be something good on TV.", meaning: "present possibility", options: ["future possibility", "past possibility", "present possibility", "lack of enthusiasm", "concession"] },
          { sentence: "We might as well go to bed.", meaning: "lack of enthusiasm", options: ["annoyance", "past possibility", "present possibility", "lack of enthusiasm", "concession"] }
        ]
      },
      {
        id: "sb1.3",
        title: "Adverbs of Degree: Cross Out Incorrect",
        type: "select-incorrect",
        instruction: "Select the word which does NOT normally collocate with the adverb.",
        questions: [
          { adverb: "perfectly", words: ["clear", "normal", "capable", "dependent"], incorrect: "dependent", explanation: "We say 'perfectly clear/normal/capable' but 'wholly dependent'" },
          { adverb: "highly", words: ["gifted", "promising", "talented", "worried"], incorrect: "worried", explanation: "We say 'highly gifted/promising/talented' but 'very worried'" },
          { adverb: "fully", words: ["qualified", "booked", "equipped", "clever"], incorrect: "clever", explanation: "We say 'fully qualified/booked/equipped' but 'very clever'" },
          { adverb: "utterly", words: ["ridiculous", "disgraceful", "opposed", "qualified"], incorrect: "qualified", explanation: "We say 'utterly ridiculous/disgraceful' but 'fully qualified'" },
          { adverb: "bitterly", words: ["resent", "regret", "disappointed", "dislike"], incorrect: "dislike", explanation: "We say 'bitterly resent/regret/disappointed' but 'strongly dislike'" }
        ]
      },
      {
        id: "sb1.4",
        title: "Word Formation: Noun Suffixes",
        type: "word-formation-suffix",
        instruction: "Complete with a noun form of the word in CAPITALS.",
        questions: [
          { sentence: "Union members expressed their ___ of the management's offer.", base: "APPROVE", answer: "disapproval" },
          { sentence: "In her ___ to receive the award, she almost tripped.", base: "EAGER", answer: "eagerness" },
          { sentence: "Her run paled into ___ when compared with the marathon.", base: "SIGNIFY", answer: "insignificance" },
          { sentence: "The ___ of the device is what made it so popular.", base: "SIMPLE", answer: "simplicity" },
          { sentence: "I have been sworn to ___ on the matter.", base: "SECRET", answer: "secrecy" },
          { sentence: "The cost of ___ has increased by 10 per cent.", base: "MEMBER", answer: "membership" },
          { sentence: "It's natural to experience ___ on your first day at work.", base: "ANXIOUS", answer: "anxiety" }
        ]
      }
    ];

    // Unit 1 WB Exercises
    const unit1WBExercises = [
      {
        id: "wb1.1",
        title: "Modal Verbs - Cross Out Incorrect",
        type: "select-incorrect-modal",
        instruction: "One of the three alternatives is INCORRECT. Select it.",
        questions: [
          { sentence: "You ___ enter the building without an employee pass.", options: ["might not", "may not", "cannot"], incorrect: "might not", explanation: "'Might not' doesn't work for prohibition/rules." },
          { sentence: "You ___ have told me you weren't coming home for dinner!", options: ["might", "may", "could"], incorrect: "may", explanation: "'May have' is rarely used for criticism/reproach." },
          { sentence: "That's not my handwriting – it ___ be Lara's, though.", options: ["might", "could", "can"], incorrect: "can", explanation: "'Can' is not typically used for speculation." },
          { sentence: "You ___ as well try and enjoy yourself.", options: ["might", "may", "could"], incorrect: "could", explanation: "'Could as well' is not a standard expression." }
        ]
      },
      {
        id: "wb1.2",
        title: "Adverbs of Degree - Fill in the Blanks",
        type: "fill-adverb-pairs",
        instruction: "Use the same adverb for BOTH gaps in each pair.",
        wordBank: ["bitterly", "entirely", "fiercely", "fully", "highly", "perfectly", "quite", "utterly", "wholly"],
        questions: [
          { sentences: ["Her behaviour was ___ disgraceful.", "I was ___ exhausted."], answer: "utterly" },
          { sentences: ["As a child, she was ___ gifted.", "You'll only succeed if you're ___ motivated."], answer: "highly" },
          { sentences: ["We're ___ booked on those dates.", "All consultants are ___ qualified."], answer: "fully" },
          { sentences: ["This service is ___ free of charge.", "I'm not ___ sure what to do."], answer: "entirely" },
          { sentences: ["It's ___ normal to be nervous.", "I'm ___ capable of deciding."], answer: "perfectly" },
          { sentences: ["I ___ resented my colleague.", "I was ___ disappointed."], answer: "bitterly" },
          { sentences: ["He's always been ___ ambitious.", "They are ___ loyal to their boss."], answer: "fiercely" }
        ]
      },
      {
        id: "wb1.3",
        title: "Grace Under Fire - Adjective + Noun",
        type: "multiple-choice-story",
        instruction: "Choose the most suitable adjective for each gap.",
        story: "Grace always had a (1)___ ambition to open her own restaurant. She thought she stood a (2)___ chance of success.\n\nGrace never imagined all the (3)___ challenges she would face. Her (4)___ motivation had always been to cook great food rather than to make money – and her first restaurant was a (5)___ failure.\n\nThen she was given a (6)___ chance when investors offered to help. Second time round, Grace's Place has been a (7)___ success.",
        questions: [
          { number: 1, options: ["burning", "complete", "resounding"], answer: "burning" },
          { number: 2, options: ["fair", "formidable", "major"], answer: "fair" },
          { number: 3, options: ["daunting", "strong", "total"], answer: "daunting" },
          { number: 4, options: ["burning", "formidable", "primary"], answer: "primary" },
          { number: 5, options: ["costly", "poor", "strong"], answer: "costly" },
          { number: 6, options: ["complete", "primary", "second"], answer: "second" },
          { number: 7, options: ["burning", "resounding", "strong"], answer: "resounding" }
        ]
      }
    ];

    // ============================================
    // COMPONENTS
    // ============================================
    const ExerciseResult = ({ isCorrect, showResult }) => {
      if (!showResult) return null;
      return <span className={`ml-2 inline-flex items-center ${isCorrect ? 'text-green-600' : 'text-red-500'}`}>
        {isCorrect ? <Icon name="CheckCircle" size={18} /> : <Icon name="XCircle" size={18} />}
      </span>;
    };

    // Fill Select Exercise
    const FillSelectExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswer = (ua, ca) => (ua || '').toLowerCase().trim() === ca.toLowerCase();
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => checkAnswer(answers[i], q.answer))) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          <div className="flex flex-wrap gap-2 p-3 bg-blue-50 rounded-lg">
            <span className="text-blue-700 font-medium">Word bank:</span>
            {exercise.wordBank.map((w, i) => <span key={i} className="bg-white px-2 py-1 rounded border text-sm">{w}</span>)}
          </div>
          {exercise.questions.map((q, i) => {
            const isCorrect = checkAnswer(answers[i], q.answer);
            const parts = q.sentence.split('___');
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p>{i + 1}. {parts[0]}<input type="text" value={answers[i] || ''} onChange={(e) => setAnswers(p => ({ ...p, [i]: e.target.value }))} className={`mx-1 px-2 py-1 border rounded w-28 ${showResults ? isCorrect ? 'border-green-500 bg-green-100' : 'border-red-400 bg-red-100' : 'border-gray-400'}`}/>{parts[1]}<ExerciseResult isCorrect={isCorrect} showResult={showResults} /></p>
                {showResults && !isCorrect && <p className="text-sm text-red-600 mt-1">Correct: {q.answer}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Match Meanings Exercise
    const MatchMeaningsExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => answers[i] === q.meaning)) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          {exercise.questions.map((q, i) => {
            const isCorrect = answers[i] === q.meaning;
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="mb-3 italic">"{q.sentence}"</p>
                <select value={answers[i] || ''} onChange={(e) => setAnswers(p => ({ ...p, [i]: e.target.value }))} className={`w-full p-2 border rounded ${showResults ? isCorrect ? 'border-green-500 bg-green-50' : 'border-red-400 bg-red-50' : 'border-gray-300'}`}>
                  <option value="">Select meaning...</option>
                  {q.options.map((o, oi) => <option key={oi} value={o}>{o}</option>)}
                </select>
                {showResults && !isCorrect && <p className="text-sm text-red-600 mt-1">Correct: {q.meaning}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Select Incorrect Adverb Exercise
    const SelectIncorrectAdverbExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => answers[i] === q.incorrect)) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          {exercise.questions.map((q, i) => {
            const isCorrect = answers[i] === q.incorrect;
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="font-medium mb-2"><span className="text-blue-700">{q.adverb}</span> + ___</p>
                <div className="flex flex-wrap gap-2">
                  {q.words.map((w, wi) => (
                    <button key={wi} onClick={() => setAnswers(p => ({ ...p, [i]: w }))} className={`px-3 py-1 rounded border transition ${answers[i] === w ? showResults ? isCorrect ? 'bg-green-600 text-white' : 'bg-red-500 text-white' : 'bg-blue-600 text-white' : 'bg-white border-gray-300 hover:border-blue-400'}`}>{w}</button>
                  ))}
                </div>
                {showResults && <p className={`text-sm mt-2 ${isCorrect ? 'text-green-700' : 'text-red-600'}`}>{q.explanation}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Word Formation Suffix Exercise
    const WordFormationSuffixExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswer = (ua, ca) => (ua || '').toLowerCase().trim() === ca.toLowerCase();
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => checkAnswer(answers[i], q.answer))) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          {exercise.questions.map((q, i) => {
            const isCorrect = checkAnswer(answers[i], q.answer);
            const parts = q.sentence.split('___');
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <div className="flex items-start gap-3">
                  <span className="bg-blue-100 text-blue-800 px-2 py-1 rounded font-mono text-sm min-w-[80px] text-center">{q.base}</span>
                  <p className="flex-1">{parts[0]}<input type="text" value={answers[i] || ''} onChange={(e) => setAnswers(p => ({ ...p, [i]: e.target.value }))} className={`mx-1 px-2 py-1 border rounded w-32 ${showResults ? isCorrect ? 'border-green-500 bg-green-100' : 'border-red-400 bg-red-100' : 'border-gray-400'}`}/>{parts[1]}<ExerciseResult isCorrect={isCorrect} showResult={showResults} /></p>
                </div>
                {showResults && !isCorrect && <p className="text-sm text-red-600 mt-2 ml-24">Correct: {q.answer}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Select Incorrect Modal Exercise
    const SelectIncorrectModalExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => answers[i] === q.incorrect)) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          {exercise.questions.map((q, i) => {
            const isCorrect = answers[i] === q.incorrect;
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="mb-3">{i + 1}. {q.sentence}</p>
                <div className="flex flex-wrap gap-2">
                  {q.options.map((o, oi) => (
                    <button key={oi} onClick={() => setAnswers(p => ({ ...p, [i]: o }))} className={`px-4 py-2 rounded border transition ${answers[i] === o ? showResults ? isCorrect ? 'bg-green-600 text-white' : 'bg-red-500 text-white' : 'bg-blue-600 text-white' : 'bg-white border-gray-300 hover:border-blue-400'}`}>{o}</button>
                  ))}
                </div>
                {showResults && <p className={`mt-2 text-sm ${isCorrect ? 'text-green-700' : 'text-red-600'}`}>{q.explanation}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Fill Adverb Pairs Exercise
    const FillAdverbPairsExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswer = (ua, ca) => (ua || '').toLowerCase().trim() === ca.toLowerCase();
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => checkAnswer(answers[i], q.answer))) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          <div className="flex flex-wrap gap-2 p-3 bg-blue-50 rounded-lg">
            <span className="text-blue-700 font-medium">Adverbs:</span>
            {exercise.wordBank.map((w, i) => <span key={i} className="bg-white px-2 py-1 rounded border text-sm">{w}</span>)}
          </div>
          {exercise.questions.map((q, i) => {
            const isCorrect = checkAnswer(answers[i], q.answer);
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="font-medium mb-2">{i + 1}.</p>
                {q.sentences.map((s, si) => <p key={si} className="text-gray-700 mb-1">• {s}</p>)}
                <div className="flex items-center gap-3 mt-3">
                  <span>Answer:</span>
                  <input type="text" value={answers[i] || ''} onChange={(e) => setAnswers(p => ({ ...p, [i]: e.target.value }))} className={`flex-1 max-w-xs p-2 border rounded ${showResults ? isCorrect ? 'border-green-500 bg-green-50' : 'border-red-400 bg-red-50' : 'border-gray-300'}`} placeholder="Type the adverb..."/>
                  <ExerciseResult isCorrect={isCorrect} showResult={showResults} />
                </div>
                {showResults && !isCorrect && <p className="mt-2 text-sm text-red-600">Correct: {q.answer}</p>}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Multiple Choice Story Exercise
    const MultipleChoiceStoryExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => answers[i] === q.answer)) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };
      const score = showResults ? exercise.questions.filter((q, i) => answers[i] === q.answer).length : 0;

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          <div className="bg-gray-100 p-4 rounded-lg text-sm whitespace-pre-line">{exercise.story}</div>
          {exercise.questions.map((q, i) => {
            const isCorrect = answers[i] === q.answer;
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="font-medium mb-2">({q.number}) ___</p>
                <div className="flex flex-wrap gap-2">
                  {q.options.map((o, oi) => (
                    <button key={oi} onClick={() => setAnswers(p => ({ ...p, [i]: o }))} className={`px-4 py-2 rounded border transition ${answers[i] === o ? showResults ? isCorrect ? 'bg-green-600 text-white' : 'bg-red-500 text-white' : 'bg-blue-600 text-white' : showResults && o === q.answer ? 'bg-green-200 border-green-400' : 'bg-white border-gray-300 hover:border-blue-400'}`}>{o}</button>
                  ))}
                </div>
              </div>
            );
          })}
          {showResults && <div className={`p-4 rounded-lg ${score === exercise.questions.length ? 'bg-green-100' : 'bg-yellow-100'}`}><p className="font-medium">Score: {score} / {exercise.questions.length}</p></div>}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Error Correction Exercise (VIU 60.3)
    const ErrorCorrectionExercise = ({ exercise, onComplete }) => {
      const [answers, setAnswers] = useState({});
      const [showResults, setShowResults] = useState(false);
      const checkAnswer = (ua, c) => { const u = (ua || '').toLowerCase().trim(); return u.includes(c.toLowerCase().split(' ').slice(-2).join(' ')) || u === c.toLowerCase(); };
      const checkAnswers = () => { setShowResults(true); if (exercise.questions.every((q, i) => checkAnswer(answers[i], q.correction))) onComplete?.(); };
      const reset = () => { setAnswers({}); setShowResults(false); };

      return (
        <div className="space-y-4">
          <p className="text-gray-600 italic">{exercise.instruction}</p>
          {exercise.questions.map((q, i) => {
            const isCorrect = checkAnswer(answers[i], q.correction);
            return (
              <div key={i} className={`p-4 rounded-lg ${showResults ? isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200' : 'bg-gray-50'}`}>
                <p className="mb-3 text-gray-800">{i + 1}. <span className="italic">"{q.sentence}"</span></p>
                <div className="flex items-center gap-3 flex-wrap">
                  <span className="text-sm text-gray-600">Correction:</span>
                  <input type="text" value={answers[i] || ''} onChange={(e) => setAnswers(p => ({ ...p, [i]: e.target.value }))} className={`flex-1 min-w-[200px] p-2 border rounded ${showResults ? isCorrect ? 'border-green-500 bg-green-50' : 'border-red-400 bg-red-50' : 'border-gray-300'}`} placeholder="Type the corrected phrase..."/>
                  <ExerciseResult isCorrect={isCorrect} showResult={showResults} />
                </div>
                {showResults && (
                  <div className={`mt-3 p-3 rounded ${isCorrect ? 'bg-green-100' : 'bg-red-100'}`}>
                    <p className="text-sm"><strong>Error:</strong> <span className="line-through text-red-600">{q.error}</span></p>
                    <p className="text-sm"><strong>Correct:</strong> <span className="text-green-700">{q.correction}</span></p>
                    <p className="text-sm text-gray-600 mt-1"><strong>Why:</strong> {q.explanation}</p>
                  </div>
                )}
              </div>
            );
          })}
          <div className="flex gap-3">
            <button onClick={checkAnswers} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Check Answers</button>
            <button onClick={reset} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2"><Icon name="RotateCcw" size={16} /> Reset</button>
          </div>
        </div>
      );
    };

    // Exercise Renderer
    const ExerciseRenderer = ({ exercise, onComplete }) => {
      const components = {
        'fill-select': FillSelectExercise,
        'match-meanings': MatchMeaningsExercise,
        'select-incorrect': SelectIncorrectAdverbExercise,
        'word-formation-suffix': WordFormationSuffixExercise,
        'select-incorrect-modal': SelectIncorrectModalExercise,
        'fill-adverb-pairs': FillAdverbPairsExercise,
        'multiple-choice-story': MultipleChoiceStoryExercise,
        'error-correction': ErrorCorrectionExercise,
      };
      const Component = components[exercise.type];
      if (!Component) return <p>Exercise type not supported: {exercise.type}</p>;
      return <Component exercise={exercise} onComplete={onComplete} />;
    };

    // Theory View
    const TheoryView = ({ theory, title }) => {
      const renderContent = (content) => content.split('\n').map((line, i) => {
        if (line.startsWith('**') && line.endsWith('**')) return <p key={i} className="font-bold text-gray-800 mt-3">{line.replace(/\*\*/g, '')}</p>;
        if (line.startsWith('• **')) { const p = line.replace('• **', '').split('**'); return <p key={i} className="ml-4"><span className="font-semibold">{p[0]}</span>{p[1]}</p>; }
        if (line.startsWith('• ')) return <p key={i} className="ml-4">{line}</p>;
        return <p key={i} className="text-gray-700">{line}</p>;
      });

      return (
        <div className="space-y-6">
          <h2 className="text-2xl font-bold text-gray-800">{title || "Theory"}</h2>
          {theory.sections.map((s, i) => (
            <div key={i} className="bg-white rounded-lg shadow-sm border p-6">
              <h3 className="text-lg font-semibold text-blue-700 mb-3">{s.title}</h3>
              <div className="text-gray-700 leading-relaxed space-y-1">{renderContent(s.content)}</div>
            </div>
          ))}
        </div>
      );
    };

    // Exercises List View
    const ExercisesView = ({ exercises, title, iconName }) => {
      const [currentExercise, setCurrentExercise] = useState(null);
      const [completedExercises, setCompletedExercises] = useState(new Set());
      const handleComplete = (id) => setCompletedExercises(p => new Set([...p, id]));

      if (currentExercise) {
        const exercise = exercises.find(e => e.id === currentExercise);
        return (
          <div>
            <button onClick={() => setCurrentExercise(null)} className="flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-4"><Icon name="ArrowLeft" size={18} /> Back to exercises</button>
            <div className="bg-white rounded-lg shadow-sm border p-6">
              <h3 className="text-xl font-semibold text-gray-800 mb-4">{exercise.title}</h3>
              <ExerciseRenderer exercise={exercise} onComplete={() => handleComplete(exercise.id)} />
            </div>
          </div>
        );
      }

      return (
        <div className="space-y-4">
          <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2"><Icon name={iconName} size={24} /> {title}</h2>
          <p className="text-gray-600">Complete the exercises to practice what you've learned.</p>
          {exercises.map((e) => (
            <button key={e.id} onClick={() => setCurrentExercise(e.id)} className={`w-full p-4 rounded-lg border text-left transition hover:shadow-md flex items-center justify-between ${completedExercises.has(e.id) ? 'bg-green-50 border-green-300' : 'bg-white border-gray-200 hover:border-blue-300'}`}>
              <div className="flex items-center gap-3">
                {completedExercises.has(e.id) ? <Icon name="CheckCircle" size={24} className="text-green-600" /> : <Icon name="PenTool" size={24} className="text-gray-400" />}
                <span className="font-medium text-gray-800">{e.title}</span>
              </div>
              <Icon name="ChevronRight" size={20} className="text-gray-400" />
            </button>
          ))}
        </div>
      );
    };

    // Unit Page
    const UnitPage = ({ unitId, onBack }) => {
      const unit = unitsData[unitId];
      const [activeTab, setActiveTab] = useState('theory');
      const isUnit1 = unitId === 1;

      const tabs = [
        { id: 'theory', label: 'Theory', icon: 'BookOpen' },
        { id: 'sb-exercises', label: 'Student Book', icon: 'FileText' },
        { id: 'wb-exercises', label: 'Workbook', icon: 'Notebook' },
        { id: 'viu-theory', label: 'VIU Theory', icon: 'Library' },
        { id: 'viu-exercises', label: 'VIU Exercises', icon: 'PenTool' },
      ];

      return (
        <div className="min-h-screen bg-gray-50">
          <header className="bg-white border-b sticky top-0 z-10">
            <div className="max-w-4xl mx-auto px-4 py-4">
              <button onClick={onBack} className="flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-2"><Icon name="ArrowLeft" size={18} /> Back to Units</button>
              <h1 className="text-2xl font-bold text-gray-800">{unit.title}</h1>
              <p className="text-gray-600">{unit.description}</p>
            </div>
          </header>
          <nav className="bg-white border-b">
            <div className="max-w-4xl mx-auto px-4">
              <div className="flex overflow-x-auto">
                {tabs.map((t) => (
                  <button key={t.id} onClick={() => setActiveTab(t.id)} className={`flex items-center gap-2 px-4 py-3 border-b-2 transition whitespace-nowrap ${activeTab === t.id ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-600 hover:text-gray-800'}`}>
                    <Icon name={t.icon} size={18} />{t.label}
                  </button>
                ))}
              </div>
            </div>
          </nav>
          <main className="max-w-4xl mx-auto px-4 py-6">
            {!isUnit1 ? (
              <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center">
                <Icon name="GraduationCap" size={48} className="mx-auto text-yellow-600 mb-4" />
                <h2 className="text-xl font-semibold text-gray-800 mb-2">Coming Soon</h2>
                <p className="text-gray-600">This unit is not yet available.</p>
              </div>
            ) : (
              <>
                {activeTab === 'theory' && <TheoryView theory={unit1Theory} title="Ready for Advanced - Theory" />}
                {activeTab === 'sb-exercises' && <ExercisesView exercises={unit1SBExercises} title="Student Book Exercises" iconName="FileText" />}
                {activeTab === 'wb-exercises' && <ExercisesView exercises={unit1WBExercises} title="Workbook Exercises" iconName="Notebook" />}
                {activeTab === 'viu-theory' && <TheoryView theory={viuUnit60Theory} title="Vocabulary in Use - Unit 60: Success, Failure & Difficulty" />}
                {activeTab === 'viu-exercises' && <ExercisesView exercises={viuUnit60Exercises} title="VIU Unit 60 Exercises" iconName="Library" />}
              </>
            )}
          </main>
        </div>
      );
    };

    // Home Page
    const HomePage = ({ onSelectUnit }) => (
      <div className="min-h-screen bg-gray-50">
        <header className="bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
          <div className="max-w-4xl mx-auto px-4 py-12 text-center">
            <div className="flex justify-center mb-4"><Icon name="Book" size={48} /></div>
            <h1 className="text-3xl font-bold mb-2">C1 Advanced English Practice</h1>
            <p className="text-blue-100">Ready for Advanced + Vocabulary in Use</p>
          </div>
        </header>
        <main className="max-w-4xl mx-auto px-4 py-8">
          <h2 className="text-xl font-semibold text-gray-800 mb-6 flex items-center gap-2"><Icon name="GraduationCap" size={24} /> Units</h2>
          <div className="grid gap-4">
            {Object.entries(unitsData).map(([id, u]) => {
              const isAvailable = parseInt(id) === 1;
              return (
                <button key={id} onClick={() => onSelectUnit(parseInt(id))} disabled={!isAvailable} className={`p-6 rounded-lg border text-left transition ${isAvailable ? 'bg-white border-gray-200 hover:border-blue-400 hover:shadow-md cursor-pointer' : 'bg-gray-100 border-gray-200 cursor-not-allowed opacity-60'}`}>
                  <div className="flex items-start justify-between">
                    <div>
                      <h3 className="text-lg font-semibold text-gray-800 mb-1">{u.title}</h3>
                      <p className="text-gray-600 text-sm">{u.description}</p>
                      {isAvailable && <span className="inline-block mt-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded">+ VIU Unit 60</span>}
                      {!isAvailable && <span className="inline-block mt-2 text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded">Coming soon</span>}
                    </div>
                    <Icon name="ChevronRight" size={24} className={isAvailable ? 'text-gray-400' : 'text-gray-300'} />
                  </div>
                </button>
              );
            })}
          </div>
        </main>
        <footer className="bg-white border-t mt-12">
          <div className="max-w-4xl mx-auto px-4 py-6 text-center text-gray-500 text-sm">
            <p>C1 Advanced English Practice</p>
            <p>Ready for Advanced + Vocabulary in Use Upper-Intermediate</p>
          </div>
        </footer>
      </div>
    );

    // Main App
    function App() {
      const [currentUnit, setCurrentUnit] = useState(null);
      if (currentUnit) return <UnitPage unitId={currentUnit} onBack={() => setCurrentUnit(null)} />;
      return <HomePage onSelectUnit={setCurrentUnit} />;
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
